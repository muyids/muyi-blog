当我们的系统中存在多个微服务时，客户端请求不同的服务，会是下面的架构：

![2021-10-13 pm2.28.52](https://muyids.oss-cn-beijing.aliyuncs.com/2021-10-13%20pm2.28.52.png)

这样的架构会有什么问题呢？

一、对于服务端：每个业务都需要**鉴权、限流、权限校验、跨域**等逻辑，需要重复造轮子

二、对于客户端：每一个微服务都需要**配置不同的域名**，客户端需要给每一个服务进行配置，代码**难维护**，另外也容易遇到**连接数的瓶颈**；想象一下，打开一个 APP 抓包发现有数百个不同的远程调用，在移动端下显得**非常低效**

三、后期重构困难：比如，随着业务越来越复杂，后端想重构商品服务，进行服务拆分，这时候对外提供的服务也需要拆成多个，非常麻烦

上面这些问题可以借助**API 网关**来解决

**API 网关的功能**

**_稳定与安全_**

- 全局性流控
- 日志统计
- 防止 SQL 注入
- 防止 web 攻击
- 屏蔽工具扫描
- 黑白 IP 名单
- 证书/加解密处理

**_全局性统一服务_**

- 权限验证与用户等级策略
- 业务规则与参数校验
- 多级缓存策略
- 服务级别流控
- 服务降级与熔断
- 路由与负载均衡、灰度策略
