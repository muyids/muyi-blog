# 卡特兰数

**卡特兰数**是**组合数学**中一个常出现在各种**计数问题**中的数列

其前几项为（从第零项开始）: `1, 1, 2, 5, 14, 42, 132, 429, 1430, 4862, 16796, 58786, 208012, 742900, 2674440, 9694845, 35357670, 129644790, 477638700, 1767263190, 6564120420, 24466267020, 91482563640, 343059613650, 1289904147324, 4861946401452, ...`

设`h(n)`为 catalan 数的第 n+1 项，令`h(0)=1`,`h(1)=1`，catalan 数满足递推式：

`h(n)= h(0)*h(n-1)+h(1)*h(n-2) + ... + h(n-1)*h(0) (n>=2)`

- 另类递推式：`h(n)=h(n-1)*(4*n-2)/(n+1)`
- 递推关系的解为：$$h(n)=C_{2*n}^n/(n+1)$$ `(n=0,1,2,...)`
- 递推关系的另类解为：$$h(n)=C_{2*n}^n-C_{2*n}^{n-1}$$ `(n=0,1,2,...)`

常用通项公式：

$$h(n)=C_{2*n}^n/(n+1)$$

## 代码模板

第一种推导式：动态规划思想

```cpp
int h[100];
h[0] = 1;
h[1] = 1;
for (int i = 2; i<= n; i++){
    for (int j = 0; j< i; j++){
        h[i] += h[j]* h[i-j-1];
    }
}
```

第二种推导式：

```cpp
LL h[100];
h[0] = 1;
for (int i = 1; i<= n; i++){
    h[i]=h[i-1]*(4*i-2)/(i+1);
}
```

通项公式：

```cpp
long long cnt = 1;
for (int i = 1; i< n; i++){
    cnt = cnt * (n + i + 1)/ i;
}
cnt /= n;
```

## 应用

- 括号化

  > 矩阵连乘： P=a1×a2×a3×……×an，依据乘法结合律，不改变其顺序，只用括号表示成对的乘积，试问有几种括号化的方案？(h(n)种) [3]

- 出栈次序

  > 一个栈(无穷大)的进栈序列为 1，2，3，…，n，有多少个不同的出栈序列?

- 凸多边形三角划分

  > 凸多边形划分为三角形，切割线不想交，共有多少种情况？

- 街道选择

  > 一位大城市的律师在她住所以北 n 个街区和以东 n 个街区处工作。每天她走 2n 个街区去上班。如果她从不穿越（但可以碰到）从家到办公室的对角线，那么有多少条可能的道路？
